<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Place Details - HBnB DnD</title>
    <link rel="stylesheet" href="../styles/nav.css">
    <link rel="stylesheet" href="../styles/footer.css">
    <link rel="stylesheet" href="place_details_styles.css">
</head>
<body>
    {% include '../styles/header.html' %}

    <main class="place-main">
        <div class="place-container">
            <!-- Loading state -->
            <div id="loadingState" class="loading">Loading place details...</div>

            <!-- Error state -->
            <div id="errorState" class="error" style="display: none;">
                <h2>Oops! Something went wrong</h2>
                <p>Unable to load place details. Please try again.</p>
                <button onclick="window.location.reload()" class="retry-btn">Retry</button>
            </div>

            <!-- Place content -->
            <div id="placeContent" style="display: none;">
                <!-- Place Details Section -->
                <section class="place-details">
                    <div class="place-header">
                        <button onclick="goBack()" class="back-btn">‚Üê Back to Places</button>
                        <h1 id="placeTitle" class="place-title">Loading...</h1>
                    </div>

                    <div class="place-info">
                        <div class="place-image-container">
                            <img id="placeImage" src="" alt="Place Image" class="place-main-image">
                        </div>

                        <div class="place-details-content">
                            <div class="host-info">
                                <h3>Hosted by <span id="hostName">Loading...</span></h3>
                            </div>

                            <div class="price-info">
                                <span id="placePrice" class="price">Loading...</span>
                                <span class="period">per night</span>
                            </div>

                            <div class="description-section">
                                <h3>About this place</h3>
                                <p id="placeDescription">Loading description...</p>
                            </div>

                            <div class="amenities-section" id="amenitiesSection" style="display: none;">
                                <h3>What this place offers</h3>
                                <div id="amenitiesList" class="amenities-list">
                                    <!-- Amenities will be loaded here -->
                                </div>
                            </div>

                            <div class="location-section">
                                <h3>Location</h3>
                                <p>Coordinates: <span id="placeLocation">Loading...</span></p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Reviews Section -->
                <section class="reviews-section">
                    <div class="reviews-header">
                        <h2>Guest Reviews</h2>
                        <div id="reviewsCount" class="reviews-count">Loading reviews...</div>
                    </div>

                    <!-- Add Review Form (only for logged-in users) -->
                    <div id="addReviewSection" class="add-review" style="display: none;">
                        <h3>Share your adventure</h3>
                        <form id="reviewForm" class="form" onsubmit="submitReview(event)">
                            <div class="form-group">
                                <label for="reviewRating">Rating (1-5 stars):</label>
                                <select id="reviewRating" name="rating" required>
                                    <option value="">Select rating</option>
                                    <option value="1">1 Star - Poor</option>
                                    <option value="2">2 Stars - Fair</option>
                                    <option value="3">3 Stars - Good</option>
                                    <option value="4">4 Stars - Very Good</option>
                                    <option value="5">5 Stars - Excellent</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="reviewText">Your Review:</label>
                                <textarea id="reviewText" name="text" placeholder="Tell other adventurers about your stay..." required></textarea>
                            </div>

                            <button type="submit" class="submit-review-btn">Submit Review</button>
                        </form>

                        <div id="reviewMessage" class="review-message" style="display: none;"></div>
                    </div>

                    <!-- Reviews List -->
                    <div id="reviewsList" class="reviews-list">
                        <div class="loading">Loading reviews...</div>
                    </div>
                </section>
            </div>
        </div>
    </main>

    {% include '../styles/footer.html' %}

    <script src="place_details.js"></script>
</body>
</html>